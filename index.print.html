




	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0">
    <meta name="generator" content="Relearn 5.2.0+tip">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="K-State CS Textbook Extras">
    <meta name="author" content="Russell Feldhausen">
    <title>K-State CS Textbook Extras</title>
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/fontawesome-all.min.css?1689016652" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/fontawesome-all.min.css?1689016652" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/featherlight.min.css?1689016652" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/featherlight.min.css?1689016652" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/auto-complete.css?1689016652" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/auto-complete.css?1689016652" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/perfect-scrollbar.min.css?1689016652" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/nucleus.css?1689016652" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/fonts.css?1689016652" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/fonts.css?1689016652" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/theme.css?1689016652" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/theme-light-theme.css?1689016652" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/ie.css?1689016652" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/variant.css?1689016652" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/print.css?1689016652" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/format-print.css?1689016652" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/variant.js?1689016652"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="https://ksu-cs-textbooks.github.io/hugo-starter/index.json";
      var root_url="https://ksu-cs-textbooks.github.io/hugo-starter/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/hugo-starter/';
      window.variants && variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/hugo-starter/css/custom.css?1689016652" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/jquery.min.js?1689016652" defer></script>

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/hugo-starter/">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div class="navigation">
             <a class="nav nav-next" href="https://ksu-cs-textbooks.github.io/hugo-starter/01-introduction/" title="Introduction (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a>
          </div>
          <div class="navigation">
             <span class="nav nav-prev"><i class="fa fa-chevron-left fa-fw"></i></span>
          </div>
          <div id="top-print-link">
            <a class="print-link" title='Print whole chapter (CTRL+ALT+p)' href="https://ksu-cs-textbooks.github.io/hugo-starter/index.print.html">
              <i class="fas fa-print fa-fw"></i>
            </a>
          </div>
          <div id="top-github-link">
            <a class="github-link" title='Edit (CTRL+ALT+e)' href="https://gitlab.cs.ksu.edu/-/ide/project/cs-textbooks/extras/edit/master/-/content//_index.md" target="blank">
              <i class="fas fa-pen fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" title='Menu (CTRL+ALT+m)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <meta itemprop="itemListOrder" content="Descending" />
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="1" /><a itemprop="item" href="https://ksu-cs-textbooks.github.io/hugo-starter/" aria-disabled="true"><span itemprop="name">K-State CS Textbook Extras</span></a></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable home" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="home">
<h1></h1>

<p>Lorem Ipsum. Test GitHub</p>

            <footer class="footline">
            </footer>
          </article>

              <section>
    
    
          <article class="chapter">
<div class="article-subheading">Chapter 1</div>
<h1>Introduction</h1>

<p>Lorem Ipsum.</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<h1>Welcome</h1>
<p>Lorem Ipsum.</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
<div class="article-subheading">Chapter 2</div>
<h1>Full Stack Web Application</h1>

<p>A full stack web application from scratch!</p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<h1>Introduction</h1>
<p>This is a brief guide to building a framework for a full-stack web application from scratch.</p>
<h2 id="features">Features</h2>
<ul>
<li>Express.js Backend</li>
<li>React Frontend</li>
<li>Full Docker Setup for Development
<ul>
<li>You don&rsquo;t have to install Node or a database locally - it all runs in Docker!</li>
</ul>
</li>
<li>Docker Deployment</li>
<li>GitHub Actions</li>
</ul>
<p><strong>What this is:</strong> this guide will give you the steps to build the framework, including links to associated resources and tutorials. Basically, it will show you <em>what</em> to do.</p>
<p><strong>What this is not:</strong> this guide is not an exhaustive explanation of <em>why</em> or <em>how</em> to do these steps. It also doesn&rsquo;t cover how to build a web application once you have this framework set up. So, you may have to do some extra reading to really understand what is going on and match this framework to your needs.</p>
<h2 id="conventions">Conventions</h2>
<p>Some brief conventions in this guide:</p>
<ul>
<li>Code blocks will include a comment at the top giving the filename where the code is placed or the terminal where the commands should be executed.</li>
<li>Be careful copy/pasting code - you may have to modify code or commands to match your environment!</li>
</ul>
<h2 id="faq">FAQ</h2>
<ul>
<li><strong>Can I download this framework somewhere?</strong> Yes, it is on 

<a href="https://github.com/russfeld/fullstack" target="_blank" rel="noopener">GitHub</a>. However, the value in this framework is really going through the work of building it yourself so you understand what it contains and how it works. Then, once you&rsquo;ve built it yourself once, you can reuse your own version and tweak it as needed.</li>
</ul>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<h1>Setup</h1>
<h2 id="prerequisites">Prerequisites</h2>
<p>The basic environment required for this setup:</p>
<ul>
<li>A Linux/Unix system
<ul>
<li>Ubuntu/Debian is preferred. Mac OS X (Darwin) should also work.</li>
</ul>
</li>
<li>Docker Desktop</li>
<li>Visual Studio Code</li>
<li>Git and GitHub</li>
</ul>
<p>This guide will use the following environment:</p>
<ul>
<li>Windows 10 Host OS (should work on Windows 11 as well)</li>
<li>

<a href="https://learn.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noopener">Windows Subsystem for Linux WSL 2</a></li>
<li>

<a href="https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview" target="_blank" rel="noopener">Ubuntu LTS on WSL 2</a>
<ul>
<li>You do not need to install a GUI package as described in this guide</li>
</ul>
</li>
<li>

<a href="https://www.digitalocean.com/community/tutorials/how-to-install-git-on-ubuntu-22-04" target="_blank" rel="noopener">Git installed on Ubuntu in WSL 2</a>
<ul>
<li>You may also wish to either set up 

<a href="https://learn.microsoft.com/en-us/windows/wsl/tutorials/wsl-git" target="_blank" rel="noopener">Git Credential Manager</a> to share Git credentials with Windows or set up 

<a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/about-ssh" target="_blank" rel="noopener">SSH Keys</a> to communicate with GitHub</li>
</ul>
</li>
<li>

<a href="https://docs.docker.com/desktop/windows/wsl/" target="_blank" rel="noopener">Docker Desktop with WSL 2 Backend</a></li>
<li>

<a href="https://learn.microsoft.com/en-us/windows/wsl/tutorials/wsl-vscode" target="_blank" rel="noopener">Visual Studio Code and WSL Extension</a>
<ul>
<li>You may also wish to install the 

<a href="https://learn.microsoft.com/en-us/windows/wsl/tutorials/wsl-containers" target="_blank" rel="noopener">Dev Containers</a> extension. This guide will not use it, but that is an alternative way to develop within a container.</li>
</ul>
</li>
</ul>
<h2 id="optional">Optional</h2>
<p>To match the environment seen in the screenshots/videos, you can install these optional items:</p>
<ul>
<li>

<a href="https://learn.microsoft.com/en-us/windows/terminal/install" target="_blank" rel="noopener">Windows Terminal</a></li>
<li>

<a href="https://github.com/tonsky/FiraCode" target="_blank" rel="noopener">FiraCode</a> font in VSCode</li>
<li>Zsh terminal and 

<a href="https://github.com/ohmyzsh/ohmyzsh" target="_blank" rel="noopener">Oh My Zsh</a> in Ubuntu</li>
<li>

<a href="https://github.com/romkatv/powerlevel10k" target="_blank" rel="noopener">Powerlevel10k</a> Zsh theme
<ul>
<li>

<a href="https://github.com/romkatv/powerlevel10k#meslo-nerd-font-patched-for-powerlevel10k" target="_blank" rel="noopener">Meslo Nerd Font</a> is recommended</li>
</ul>
</li>
</ul>
<h2 id="other-systems">Other Systems</h2>
<p>This guide should generally work for developing on both Ubuntu/Debian Linux systems as well as Mac OS X systems. Some modifications will need to be made, but in general you want to have Visual Studio Code, Docker Desktop, and Git installed.</p>
<p>Likewise, deployment will mostly use GitHub actions but I will also include information for using GitLab runners.</p>
<h2 id="helpful-resources">Helpful Resources</h2>
<ul>
<li>

<a href="https://learn.microsoft.com/en-us/windows/wsl/setup/environment" target="_blank" rel="noopener">Set up a WSL development environment</a></li>
<li>

<a href="https://learn.microsoft.com/en-us/windows/wsl/filesystems" target="_blank" rel="noopener">WSL Filesystems</a></li>
</ul>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<h1>Initialize</h1>
<h2 id="create-repository">Create Repository</h2>
<p>Start by creating a new GitHub repository. We&rsquo;ll let it initialize the repository using a <code>README</code> file, and also select the <code>.gitignore</code> file for a Node project.</p>
<p><img src="../images/repo.png" alt="Create Repository"></p>
<p>If you&rsquo;ve already created the repository, you can get the <code>.gitignore</code> file for Node projects from GitHub&rsquo;s 

<a href="https://github.com/github/gitignore/blob/main/Node.gitignore" target="_blank" rel="noopener">gitignore repository</a></p>
<h2 id="check-out-repository">Check out Repository</h2>
<p>Next, check out the repository:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>git clone git@github.com:russfeld/fullstack.git
</span></span><span style="display:flex;"><span>cd fullstack
</span></span><span style="display:flex;"><span>code .
</span></span></code></pre></div>
  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>Change the repository URL to match your repository!</p>
    </div>
</div>
<p>This should open the repository in Visual Studio Code.</p>
<h2 id="create-the-file-structure">Create the File Structure</h2>
<p>Create the following folders within your project:</p>
<ul>
<li><code>client</code></li>
<li><code>server</code></li>
</ul>
<p>These folders will store the frontend and backend applications, respectively.</p>
<p>At this point, you should have the following structure:</p>
<p><img src="../images/initial.png" alt="Initial Structure"></p>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>If you aren&rsquo;t using GitHub, you can simply create the directory structure shown above manually or modify your existing project to match.</p>
    </div>
</div>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<h1>Docker</h1>

  
  
<div class="box notices cstyle note">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
    <div class="box-content">
<p>If you have already created projects locally, skip down to the 

<a href="https://ksu-cs-textbooks.github.io/hugo-starter/02-full-stack/04-docker/#01">Remove Node Modules</a> section below. You can Dockerize existing projects as well!</p>
    </div>
</div>
<h2 id="get-effective-ids">Get Effective IDs</h2>
<p>First, we need to make a note of our effective user ID and group ID in the terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>id
</span></span></code></pre></div><p>You should get output that begins with something similar to this:</p>
<pre tabindex="0"><code>uid=1000(youboon2) gid=1000(youboon2)
</code></pre><p>Remember those two numbers for later!</p>
<h2 id="create-projects">Create Projects</h2>
<p>To create the projects themselves, we&rsquo;re going to use a one-off Docker command to run a container.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker run --rm -it -v <span style="color:#e6db74">`</span>pwd<span style="color:#e6db74">`</span>/:/app node:18 bash
</span></span></code></pre></div>
  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>Make sure you run this command in the root directory of your project!</p>
    </div>
</div>
<p>In this command:</p>
<ul>
<li><code>docker run</code> will start a container to run a command. The container is removed when the command is finished.</li>
<li><code>--rm</code> will remove the container when it is finished</li>
<li><code>-it</code> will provide an interactive terminal</li>
<li><code>-v `pwd`/:/app&lt;/code&gt;</code> will create a volume mount between the current directory and the <code>/app</code> directory in the container.
<ul>
<li>Backticks around a command in the terminal will use the result of that command in the outer command. You could instead enter the full path to the current directory as part of the command, as in <code>-v /home/user/projects/fullstack:/app/code</code>.</li>
<li>See 

<a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener">Docker Volumes</a> for more details.</li>
</ul>
</li>
<li><code>node:18</code> is the name of the Docker image to run.
<ul>
<li>Refer to 

<a href="https://hub.docker.com/_/node/" target="_blank" rel="noopener">Node</a> on DockerHub for other image versions. At the time of writing, Node 18 is the current LTS version.</li>
</ul>
</li>
<li><code>bash</code> will load the Bash terminal inside of the container</li>
</ul>
<p>Refer to the 

<a href="https://docs.docker.com/engine/reference/commandline/run/" target="_blank" rel="noopener">Docker run</a> documentation for more details.</p>
<p>Once we have run that command, we should get a terminal inside of the container:</p>
<p><img src="../images/terminal.png" alt="Docker Terminal"></p>
<p>To create the projects, we are going to use 

<a href="https://expressjs.com/en/starter/generator.html" target="_blank" rel="noopener">Express Application Generator</a> and 

<a href="https://create-react-app.dev/" target="_blank" rel="noopener">Create React App</a>. You can refer to those pages for additional options that you can use when creating these projects.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Docker Container Terminal</span>
</span></span><span style="display:flex;"><span>npx express-generator -v ejs /app/server
</span></span><span style="display:flex;"><span>npx create-react-app /app/client
</span></span></code></pre></div><p>Next, we are going to set the owner and gorup of these files to match the effective user and group IDs of the host system outside of Docker. This allows us to maintain and modify the files in Visual Studio Code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Docker Container Terminal</span>
</span></span><span style="display:flex;"><span>chown -R 1000:1000 /app/*
</span></span></code></pre></div>
  
  
<div class="box notices cstyle tip">
    <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
    <div class="box-content">
<p>Modify the command above to match your IDs found earlier. The first one is the user Id and the second is the group ID.</p>
    </div>
</div>

  
  
<div class="box notices cstyle warning">
    <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
    <div class="box-content">
<p>Hopefully this highlights one of the major security concerns from using Docker volume mounts. The files are originally owned by the <code>root</code> user, but since Docker runs as <code>root</code> by default, we can use commands within a container to change file permissions that we may not be able to change outside of the container. In an enterprise setting, this means that anyone who can start Docker containers can in theory change these permissions.</p>
    </div>
</div>
<p>Once we are done, we can exit the container:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Docker Container Terminal</span>
</span></span><span style="display:flex;"><span>exit
</span></span></code></pre></div><p>This will stop the container and remove it.</p>
<h2 id="01">Remove Node Modules</h2>
<p>Finally, we want to remove the <code>node_modules</code> folders from both the <code>client</code> and <code>server</code> folders. These are created when the project is first initialized, but we don&rsquo;t want them outside of our actual containers. So, <strong>DELETE</strong> both <code>node_modules</code> folders!</p>
<h2 id="configure-docker">Configure Docker</h2>
<p>Now let&rsquo;s configure Docker to allow us to load both projects in separate Docker containers.</p>
<p>Create a <code>docker-compose.yml</code> file in the root directory of the project with the following content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#75715e"># docker-compose.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># server</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">project-server</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># location of Dockerfile</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">context</span>: <span style="color:#ae81ff">./server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">project-server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">project-network</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># mount code into container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./server:/app/server</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># maintain existing node_modules in container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/app/server/node_modules</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># client</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">project-client</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># location of Dockerfile</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">context</span>: <span style="color:#ae81ff">./client</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">project-client</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># requires server to start</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">project-server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">project-network</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># allow external connections</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># mount code into container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./client:/app/client</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># maintain existing node_modules in container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/app/client/node_modules</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># internal Docker network for project</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">project-network</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">project-network</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">internal</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>Refer to 

<a href="https://docs.docker.com/compose/compose-file/compose-file-v3/" target="_blank" rel="noopener">Docker Compose File Reference</a> for what this does.</p>
<p>We&rsquo;ll also need to add a Dockerfile to each project:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># client/Dockerfile</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># For running in development mode only</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:18</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /app/client</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> package*.json ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 3000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;npm&#34;</span>, <span style="color:#e6db74">&#34;start&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># server/Dockerfile</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># For running in development mode only</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:18</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /app/server</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> package*.json ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 3000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;npm&#34;</span>, <span style="color:#e6db74">&#34;start&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><p>Refer to 

<a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener">Dockerfile Reference</a> for the structure of these files.</p>
<p>Finally, we can start and run the Docker containers using Docker Compose:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker compose up -d
</span></span></code></pre></div><p>Refer to the 

<a href="https://docs.docker.com/compose/reference/" target="_blank" rel="noopener">Docker Compose CLI Reference</a> for how to use Docker Compose commands.</p>
<p>It will take a bit to build and configure both containers, but eventually the command should finish. This will be faster in the future. You can confirm they are running using the <code>docker ps</code> command.</p>
<p><img src="../images/docker_ps.png" alt="Docker PS"></p>
<p>To stop the containers when you are done, use</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker compose down
</span></span></code></pre></div><h2 id="commit">Commit</h2>
<p>This is a great place to stop and commit your work to GitHub.</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<h1>Working with Docker</h1>
<p>Now that the project is running in Docker, let&rsquo;s review some helpful commands we can use to interact with the Docker containers.</p>
<h2 id="docker-status">Docker Status</h2>
<p>Query running container status</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker ps
</span></span></code></pre></div><p>Sample output:</p>
<pre tabindex="0"><code>CONTAINER ID   IMAGE                      COMMAND                  CREATED         STATUS         PORTS      NAMES
119d2cc1ae20   fullstack-project-client   &#34;docker-entrypoint.s…&#34;   2 minutes ago   Up 2 minutes   3000/tcp   project-client
b5c0853fa8b2   fullstack-project-server   &#34;docker-entrypoint.s…&#34;   2 minutes ago   Up 2 minutes              project-server
</code></pre><h2 id="software-output">Software Output</h2>
<p>You can view the output of programs running in a container using this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker logs project-client
</span></span></code></pre></div><p>Replace <code>project-client</code> with the name of the container to query.</p>
<p>If you want to monitor the logs for new output, add the <code>-f</code> flag:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker logs -f project-client
</span></span></code></pre></div><p>When following the logs, use <kbd>CTRL</kbd> + <kbd>C</kbd> to exit.</p>
<h2 id="terminal">Terminal</h2>
<p>To get an interactive terminal inside of the container, use this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker exec -it project-client bash
</span></span></code></pre></div><p>Replace <code>project-client</code> with the name of the container to run the command in.</p>
<p>The command <code>bash</code> will get you an interactive terminal running Bash. You can replace <code>bash</code> with another command to run that command inside of the container itself. This allows you to run comands inside of the contaniner while it is running. However, your app will also be running, so you will be limited in what you can do.</p>
<h2 id="run-commands">Run Commands</h2>
<p>Alternatively, you can run some commands inside of a container using Docker compose:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#Terminal</span>
</span></span><span style="display:flex;"><span>docker compose run --rm project-client npm run test
</span></span></code></pre></div><p>This will create a new temporary container to run the command, so be aware that there may be some side effects of doing so.</p>
<h2 id="cleanup">Cleanup</h2>
<p>Finally, Docker provides a handy command to cleanup any unused Docker resources on your system to conserve space:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker system prune
</span></span></code></pre></div><p>This removes all unused containers, images, networks, and more. However, it will not remove any data volumes by default, but you can add the <code>--volumes</code> option to do just that.</p>
<h2 id="reference">Reference</h2>
<p>

<a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener">Docker Command Line Reference</a></p>

            <footer class="footline">
            </footer>
          </article>

          </section>
    
    
          <article class="chapter">
<div class="article-subheading">Chapter 3</div>
<h1>Setting Up a Canvas Course</h1>

<p>Setting up a Canvas course to connect with a Codio Course.</p>
<ol>
<li>Connect the Canvas course to the Codio organization</li>
<li>Connect the Canvas course to the Codio course</li>
<li>Connect a Canvas assignment to a Codio assignment</li>
</ol>
<p>If you</p>
<p>Here is a video you can follow along with or you can follow through this Chapters pages.</p>
<p><a href="https://www.youtube.com/watch?v=wzzIYT5iyvE">YouTube Video</a></p>

            <footer class="footline">
            </footer>
          </article>

          <section>
    
    
          <article class="default">
<h1>Canvas to Codio Org</h1>
<p><a href="https://www.youtube.com/watch?v=wzzIYT5iyvE">YouTube Video</a></p>
<p>In this</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<h1>Canvas to Codio Course</h1>
<p><a href="https://www.youtube.com/watch?v=wzzIYT5iyvE">YouTube Video</a></p>
<p>In this</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<h1>Canvas to Codio Assignment</h1>
<p><a href="https://www.youtube.com/watch?v=wzzIYT5iyvE">YouTube Video</a></p>
<p>In this</p>

            <footer class="footline">
            </footer>
          </article>

    
    
          <article class="default">
<h1>Cloning a Canvas Course</h1>

            <footer class="footline">
            </footer>
          </article>

          </section>
              </section>
        </div>
      </main>
    
<div class="git-footer">
<p>Last modified by: 
            <i class='fas fa-user'></i> Russell Feldhausen
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cs-textbooks/extras/-/commit/2e7edc71e4e6774594eef5cc2c3bf94f7b1d713d">Dec 7, 2022</a>
</p>
</div>

    
    </div>
    <aside id="sidebar" class="default-animation">
      <div id="header-wrapper" class="default-animation">
        <div id="header" class="default-animation">

<a id="logo" href="https://ksu-cs-textbooks.github.io/hugo-starter/">
  K-State CS Textbook Extras
</a>
        </div>
        <div class="searchbox default-animation">
          <label for="search-by"><i class="fas fa-search"></i></label>
          <input data-search-input id="search-by" type="search" placeholder="Search...">
          <span data-search-clear=""><i class="fas fa-times"></i></span>
        </div>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/auto-complete.js?1689016652" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/lunr.min.js?1689016652" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/lunr.stemmer.support.min.js?1689016652" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/lunr.multi.min.js?1689016652" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/lunr.en.min.js?1689016652" defer></script>
        <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/search.js?1689016652" defer></script>
      </div>
      <div id="content-wrapper" class="highlightable">
        <ul class="topics collapsible-menu">
          <li data-nav-id="/01-introduction/" title="Introduction" class="dd-item"><input type="checkbox" id="section-8eafca96a477d19968a76a0ac8bd2d47" class="toggle"/><label for="section-8eafca96a477d19968a76a0ac8bd2d47" ></label><a href="https://ksu-cs-textbooks.github.io/hugo-starter/01-introduction/"><b>1. </b>Introduction</a><ul>
          <li data-nav-id="/01-introduction/01-welcome/" title="Welcome" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/01-introduction/01-welcome/">1. Welcome</a></li></ul></li>
          <li data-nav-id="/02-full-stack/" title="Full Stack Web Application" class="dd-item"><input type="checkbox" id="section-3e7d5e9cdecc4eda70a9f42a08e0b3e6" class="toggle"/><label for="section-3e7d5e9cdecc4eda70a9f42a08e0b3e6" ></label><a href="https://ksu-cs-textbooks.github.io/hugo-starter/02-full-stack/"><b>2. </b>Full Stack Web Application</a><ul>
          <li data-nav-id="/02-full-stack/01-intro/" title="Introduction" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/02-full-stack/01-intro/">1. Introduction</a></li>
          <li data-nav-id="/02-full-stack/02-setup/" title="Setup" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/02-full-stack/02-setup/">2. Setup</a></li>
          <li data-nav-id="/02-full-stack/03-initial/" title="Initialize" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/02-full-stack/03-initial/">3. Initialize</a></li>
          <li data-nav-id="/02-full-stack/04-docker/" title="Docker" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/02-full-stack/04-docker/">4. Docker</a></li>
          <li data-nav-id="/02-full-stack/05-working/" title="Working with Docker" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/02-full-stack/05-working/">5. Working with Docker</a></li></ul></li>
          <li data-nav-id="/03-canvas-setup/" title="Setting Up a Canvas Course" class="dd-item"><input type="checkbox" id="section-d32fb3f4fb9e82785cdf48fa94602da9" class="toggle"/><label for="section-d32fb3f4fb9e82785cdf48fa94602da9" ></label><a href="https://ksu-cs-textbooks.github.io/hugo-starter/03-canvas-setup/"><b>3. </b>Setting Up a Canvas Course</a><ul>
          <li data-nav-id="/03-canvas-setup/01-codio-org/" title="Canvas to Codio Org" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/03-canvas-setup/01-codio-org/">1. Canvas to Codio Org</a></li>
          <li data-nav-id="/03-canvas-setup/02-codio-course/" title="Canvas to Codio Course" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/03-canvas-setup/02-codio-course/">2. Canvas to Codio Course</a></li>
          <li data-nav-id="/03-canvas-setup/03-codio-assign/" title="Canvas to Codio Assignment" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/03-canvas-setup/03-codio-assign/">3. Canvas to Codio Assignment</a></li>
          <li data-nav-id="/03-canvas-setup/04-canvas-clone/" title="Cloning a Canvas Course" class="dd-item"><a href="https://ksu-cs-textbooks.github.io/hugo-starter/03-canvas-setup/04-canvas-clone/">4. Cloning a Canvas Course</a></li></ul></li>
        </ul>
        <div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div>
        <hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"/>
        <div id="prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch">
          <ul>
            <li id="select-language-container" class="footerLangSwitch">
              <a class="padding select-container">
                <i class="fas fa-language fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-language" onchange="location = baseUri + this.value;">
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
            </li>
            <li id="select-variant-container" class="footerVariantSwitch showVariantSwitch">
              <a class="padding select-container">
                <i class="fas fa-paint-brush fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                    <option id="light-theme" value="light-theme" selected>Light Theme</option>
                    <option id="dark-theme" value="dark-theme">Dark Theme</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
              <script>window.variants && variants.markSelectedVariant();</script>
            </li>
            <li class="footerVisitedLinks"><a class="padding" onclick="clearHistory();"><i class="fas fa-history fa-fw"></i> Clear History</a></li>
          </ul>
        </div>
        <div id="footer" class="footerFooter showFooter"><style>
#footer {
	font-size: 13px;
	margin-left: auto;
	margin-right: auto;
	padding: 2rem 1rem;
	min-width: 230px;
	max-width: 300px;
}
#footer p {
	margin: 0;
}
</style>

<p>Built using <a href="http://gohugo.io/">Hugo</a> and <a href="https://github.com/ksu-cs-textbooks/hugo-theme-relearn">Hugo Relearn Theme</a>.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; margin: .5rem auto" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.</a></p>

        </div>
      </div>
    </aside>
    <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/clipboard.min.js?1689016652" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/perfect-scrollbar.min.js?1689016652" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/featherlight.min.js?1689016652" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/hugo-starter/js/theme.js?1689016652" defer></script>
  </body>
</html>
