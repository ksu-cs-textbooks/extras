<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.148.1">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="Note If you have already created projects locally, skip down to the Remove Node Modules section below. You can Dockerize existing projects as well!
Get Effective IDs First, we need to make a note of our effective user ID and group ID in the terminal:
# Terminal id You should get output that begins with something similar to this:
uid=1000(youboon2) gid=1000(youboon2) Remember those two numbers for later!">
    <meta name="author" content="Russell Feldhausen">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/extras/images/hero.png">
    <meta name="twitter:title" content="Docker :: K-State CS Textbook Extras">
    <meta name="twitter:description" content="Note If you have already created projects locally, skip down to the Remove Node Modules section below. You can Dockerize existing projects as well!
Get Effective IDs First, we need to make a note of our effective user ID and group ID in the terminal:
# Terminal id You should get output that begins with something similar to this:
uid=1000(youboon2) gid=1000(youboon2) Remember those two numbers for later!">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/extras/02-full-stack/04-docker/index.html">
    <meta property="og:site_name" content="K-State CS Textbook Extras">
    <meta property="og:title" content="Docker :: K-State CS Textbook Extras">
    <meta property="og:description" content="Note If you have already created projects locally, skip down to the Remove Node Modules section below. You can Dockerize existing projects as well!
Get Effective IDs First, we need to make a note of our effective user ID and group ID in the terminal:
# Terminal id You should get output that begins with something similar to this:
uid=1000(youboon2) gid=1000(youboon2) Remember those two numbers for later!">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Full Stack Web Application">
    <meta property="article:modified_time" content="2024-06-27T16:41:43-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/extras/images/hero.png">
    <meta itemprop="name" content="Docker :: K-State CS Textbook Extras">
    <meta itemprop="description" content="Note If you have already created projects locally, skip down to the Remove Node Modules section below. You can Dockerize existing projects as well!
Get Effective IDs First, we need to make a note of our effective user ID and group ID in the terminal:
# Terminal id You should get output that begins with something similar to this:
uid=1000(youboon2) gid=1000(youboon2) Remember those two numbers for later!">
    <meta itemprop="dateModified" content="2024-06-27T16:41:43-05:00">
    <meta itemprop="wordCount" content="820">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/extras/images/hero.png">
    <title>Docker :: K-State CS Textbook Extras</title>
    <link href="/extras/02-full-stack/04-docker/index.xml" rel="alternate" type="application/rss+xml" title="Docker :: K-State CS Textbook Extras">
    <link href="/extras/02-full-stack/04-docker/index.print.html" rel="alternate" type="text/html" title="Docker :: K-State CS Textbook Extras">
    <link href="/extras/02-full-stack/04-docker/tele.html" rel="alternate" type="text/html" title="Docker :: K-State CS Textbook Extras">
    <link href="/extras/02-full-stack/04-docker/embed.html" rel="alternate" type="text/html" title="Docker :: K-State CS Textbook Extras">
    <link href="/extras/css/auto-complete/auto-complete.min.css?1758047504" rel="stylesheet">
    <script src="/extras/js/auto-complete/auto-complete.min.js?1758047504" defer></script>
    <script src="/extras/js/search-lunr.min.js?1758047504" defer></script>
    <script src="/extras/js/search.min.js?1758047504" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/extras/searchindex.en.js?1758047504";
    </script>
    <script src="/extras/js/lunr/lunr.min.js?1758047504" defer></script>
    <script src="/extras/js/lunr/lunr.stemmer.support.min.js?1758047504" defer></script>
    <script src="/extras/js/lunr/lunr.multi.min.js?1758047504" defer></script>
    <script src="/extras/js/lunr/lunr.en.min.js?1758047504" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/extras/fonts/fontawesome/css/fontawesome-all.min.css?1758047504" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/extras/fonts/fontawesome/css/fontawesome-all.min.css?1758047504" rel="stylesheet"></noscript>
    <link href="/extras/css/perfect-scrollbar/perfect-scrollbar.min.css?1758047504" rel="stylesheet">
    <link href="/extras/css/theme.min.css?1758047504" rel="stylesheet">
    <link href="/extras/css/format-html.min.css?1758047504" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/02-full-stack\/04-docker\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/extras';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'auto', 'light-theme', 'dark-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=true;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/extras/css/custom.css?1758047504" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/extras/02-full-stack/04-docker/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#get-effective-ids">Get Effective IDs</a></li>
    <li><a href="#create-projects">Create Projects</a></li>
    <li><a href="#01">Remove Node Modules</a></li>
    <li><a href="#configure-docker">Configure Docker</a></li>
    <li><a href="#commit">Commit</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class="a11y-only"><a itemprop="item" href="/extras/index.html"><span itemprop="name">K-State CS Textbook Extras</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/extras/02-full-stack/index.html"><span itemprop="name">Full Stack Web Application</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Docker</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-edit" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://github.com/ksu-cs-textbooks/extras/edit/master/content/02-full-stack/04-docker.md" rel="external" target="_blank" title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a>
            </div>
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/extras/02-full-stack/04-docker/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/extras/02-full-stack/03-initial/index.html" title="Initialize (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/extras/02-full-stack/05-working/index.html" title="Working with Docker (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
            <div class="topbar-button topbar-button-embed" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/extras/02-full-stack/04-docker/embed.html" title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a>
            </div>
            <div class="topbar-button topbar-button-tele" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/extras/02-full-stack/04-docker/tele.html" title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a>
            </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 02-full-stack" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="docker">Docker</h1>


<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p>If you have already created projects locally, skip down to the <a href="/extras/02-full-stack/04-docker/index.html#01">Remove Node Modules</a> section below. You can Dockerize existing projects as well!</p>
  </div>
</details>
<h2 id="get-effective-ids">Get Effective IDs</h2>
<p>First, we need to make a note of our effective user ID and group ID in the terminal:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>id</span></span></code></pre></div>
<p>You should get output that begins with something similar to this:</p>
<div class="highlight" dir="auto"><pre tabindex="0"><code>uid=1000(youboon2) gid=1000(youboon2)</code></pre></div>
<p>Remember those two numbers for later!</p>
<h2 id="create-projects">Create Projects</h2>
<p>To create the projects themselves, we&rsquo;re going to use a one-off Docker command to run a container.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker run --rm -it --user<span style="color:#f92672">=</span>1000:1000 -v <span style="color:#e6db74">`</span>pwd<span style="color:#e6db74">`</span>/:/app node:18 bash</span></span></code></pre></div>

<details open class=" box cstyle notices tip">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-lightbulb"></i> 
    Tip
  </summary>
  <div class="box-content">
<p>Modify the command above to match your IDs found earlier. See below for details. Make sure you run this command in the root directory of your project!</p>
  </div>
</details>
<p>In this command:</p>
<ul>
<li><code>docker run</code> will start a container to run a command. The container is removed when the command is finished.</li>
<li><code>--rm</code> will remove the container when it is finished</li>
<li><code>-it</code> will provide an interactive terminal</li>
<li><code>--user=1000:1000</code> will set the user and group IDs to 1000, respectively - match these to the output you received above.</li>
<li><code>-v `pwd`/:/app&lt;/code&gt;</code> will create a volume mount between the current directory and the <code>/app</code> directory in the container.
<ul>
<li>Backticks around a command in the terminal will use the result of that command in the outer command. You could instead enter the full path to the current directory as part of the command, as in <code>-v /home/user/projects/fullstack:/app/code</code>.</li>
<li>See <a href="https://docs.docker.com/storage/volumes/" rel="external" target="_blank">Docker Volumes</a> for more details.</li>
</ul>
</li>
<li><code>node:18</code> is the name of the Docker image to run.
<ul>
<li>Refer to <a href="https://hub.docker.com/_/node/" rel="external" target="_blank">Node</a> on DockerHub for other image versions. At the time of writing, Node 18 is the current LTS version.</li>
</ul>
</li>
<li><code>bash</code> will load the Bash terminal inside of the container</li>
</ul>
<p>Refer to the <a href="https://docs.docker.com/engine/reference/commandline/run/" rel="external" target="_blank">Docker run</a> documentation for more details.</p>
<p>Once we have run that command, we should get a terminal inside of the container:</p>
<p><a href="#R-image-57d0d9f02413c97465ae2f4f6ca99aab" class="lightbox-link"><img alt="Docker Terminal" class="border lazy lightbox figure-image" loading="lazy" src="/extras/images/terminal.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-57d0d9f02413c97465ae2f4f6ca99aab"><img alt="Docker Terminal" class="border lazy lightbox lightbox-image" loading="lazy" src="/extras/images/terminal.png"></a></p>
<p>To create the projects, we are going to use <a href="https://expressjs.com/en/starter/generator.html" rel="external" target="_blank">Express Application Generator</a> and <a href="https://create-react-app.dev/" rel="external" target="_blank">Create React App</a>. You can refer to those pages for additional options that you can use when creating these projects.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Docker Container Terminal</span>
</span></span><span style="display:flex;"><span>npx express-generator -v ejs /app/server
</span></span><span style="display:flex;"><span>npx create-react-app /app/client</span></span></code></pre></div>

<details open class=" box cstyle notices note">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-circle"></i> 
    Note
  </summary>
  <div class="box-content">
<p>This guide uses React, but you could easily use Vue or another frontend framework here. Just make sure it is placed in the <code>/app/client</code> directory inside of the container.</p>
  </div>
</details>
<p>Once we are done, we can exit the container:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Docker Container Terminal</span>
</span></span><span style="display:flex;"><span>exit</span></span></code></pre></div>
<p>This will stop the container and remove it.</p>
<h2 id="01">Remove Node Modules</h2>
<p>Finally, we want to remove the <code>node_modules</code> folders from both the <code>client</code> and <code>server</code> folders. These are created when the project is first initialized, but we don&rsquo;t want them outside of our actual containers. So, <strong>DELETE</strong> both <code>node_modules</code> folders!</p>
<h2 id="configure-docker">Configure Docker</h2>
<p>Now let&rsquo;s configure Docker to allow us to load both projects in separate Docker containers.</p>
<p>Create a <code>docker-compose.yml</code> file in the root directory of the project with the following content:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#75715e"># docker-compose.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># server</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">project-server</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># location of Dockerfile</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">context</span>: <span style="color:#ae81ff">./server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">project-server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># set the user ID to match our user</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">user</span>: <span style="color:#e6db74">&#34;1000&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">project-network</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># allow external connections (remove this in production)</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># mount code into container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./server:/app/server</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># maintain existing node_modules in container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/app/server/node_modules</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># client</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">project-client</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># location of Dockerfile</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">context</span>: <span style="color:#ae81ff">./client</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">project-client</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># set the user ID to match our user</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">user</span>: <span style="color:#e6db74">&#34;1000&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># requires server to start</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">project-server</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">project-network</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># allow external connections</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># mount code into container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./client:/app/client</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># maintain existing node_modules in container</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/app/client/node_modules</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># internal Docker network for project</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">project-network</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">project-network</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">internal</span>: <span style="color:#66d9ef">true</span></span></span></code></pre></div>
<p>Refer to <a href="https://docs.docker.com/compose/compose-file/compose-file-v3/" rel="external" target="_blank">Docker Compose File Reference</a> for what this does.</p>

<details open class=" box cstyle notices tip">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-lightbulb"></i> 
    Tip
  </summary>
  <div class="box-content">
<p>Update <code>user: &quot;1000&quot;</code> in each of these files to match the user ID found earlier.</p>
  </div>
</details>
<p>We&rsquo;ll also need to add a Dockerfile to each project:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># client/Dockerfile</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># For running in development mode only</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:18</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">USER</span><span style="color:#e6db74"> 1000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /app/client</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> --chown<span style="color:#f92672">=</span>1000:1000 package*.json ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 3000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;npm&#34;</span>, <span style="color:#e6db74">&#34;start&#34;</span>]</span></span></code></pre></div>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># server/Dockerfile</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># For running in development mode only</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:18</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">USER</span><span style="color:#e6db74"> 1000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /app/server</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> --chown<span style="color:#f92672">=</span>1000:1000 package*.json ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 3000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;npm&#34;</span>, <span style="color:#e6db74">&#34;run&#34;</span>, <span style="color:#e6db74">&#34;dev&#34;</span>]</span></span></code></pre></div>
<p>Refer to <a href="https://docs.docker.com/engine/reference/builder/" rel="external" target="_blank">Dockerfile Reference</a> for the structure of these files.</p>

<details open class=" box cstyle notices tip">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-lightbulb"></i> 
    Tip
  </summary>
  <div class="box-content">
<p>Update <code>user: &quot;1000&quot;</code> and <code>--chown=1000:1000</code> in each of these files to match the user ID and group ID found earlier.</p>
  </div>
</details>
<p>Finally, we can start and run the Docker containers using Docker Compose:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker compose up -d</span></span></code></pre></div>
<p>Refer to the <a href="https://docs.docker.com/compose/reference/" rel="external" target="_blank">Docker Compose CLI Reference</a> for how to use Docker Compose commands.</p>
<p>It will take a bit to build and configure both containers, but eventually the command should finish. This will be faster in the future. You can confirm they are running using the <code>docker ps</code> command.</p>
<p><a href="#R-image-376e7d7a5b9dac39f3d5e432cbae430f" class="lightbox-link"><img alt="Docker PS" class="border lazy lightbox figure-image" loading="lazy" src="/extras/images/docker_ps.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-376e7d7a5b9dac39f3d5e432cbae430f"><img alt="Docker PS" class="border lazy lightbox lightbox-image" loading="lazy" src="/extras/images/docker_ps.png"></a></p>
<p>To stop the containers when you are done, use</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal</span>
</span></span><span style="display:flex;"><span>docker compose down</span></span></code></pre></div>
<h2 id="commit">Commit</h2>
<p>This is a great place to stop and commit your work to GitHub.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
<div class="git-footer">
  <p class="theme-version-footer">8.0.0</p>
<p>Last modified by:
              <i class='fa-fw fas fa-user'></i> Russell Feldhausen
              <i class='fas fa-calendar'></i> <a href="https://github.com/ksu-cs-textbooks/extras/commit/519faedbbc5229d2776b846866cac0205bd0a73b">Jun 27, 2024</a>
</p>

</div>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          
          <a id="R-logo" href="/extras/index.html">
            <div class="logo-title">K-State CS Hugo Framework</div>
          </a>
        </div>
        <search><form action="/extras/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/extras/01-introduction/index.html"><input type="checkbox" id="R-section-8ac037dd365a7ab70041d22087358e55" aria-controls="R-subsections-8ac037dd365a7ab70041d22087358e55"><label for="R-section-8ac037dd365a7ab70041d22087358e55"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Introduction</span></label><a class="padding" href="/extras/01-introduction/index.html"><b>1. </b>Introduction</a><ul id="R-subsections-8ac037dd365a7ab70041d22087358e55" class="collapsible-menu">
            <li class="" data-nav-id="/extras/01-introduction/01-welcome/index.html"><a class="padding" href="/extras/01-introduction/01-welcome/index.html">1. Welcome</a></li></ul></li>
            <li class="parent " data-nav-id="/extras/02-full-stack/index.html"><input type="checkbox" id="R-section-833bd75f80125bdb3a3b58824278b2dc" aria-controls="R-subsections-833bd75f80125bdb3a3b58824278b2dc" checked><label for="R-section-833bd75f80125bdb3a3b58824278b2dc"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Full Stack Web Application</span></label><a class="padding" href="/extras/02-full-stack/index.html"><b>2. </b>Full Stack Web Application</a><ul id="R-subsections-833bd75f80125bdb3a3b58824278b2dc" class="collapsible-menu">
            <li class="" data-nav-id="/extras/02-full-stack/01-intro/index.html"><a class="padding" href="/extras/02-full-stack/01-intro/index.html">1. Introduction</a></li>
            <li class="" data-nav-id="/extras/02-full-stack/02-setup/index.html"><a class="padding" href="/extras/02-full-stack/02-setup/index.html">2. Setup</a></li>
            <li class="" data-nav-id="/extras/02-full-stack/03-initial/index.html"><a class="padding" href="/extras/02-full-stack/03-initial/index.html">3. Initialize</a></li>
            <li class="active " data-nav-id="/extras/02-full-stack/04-docker/index.html"><a class="padding" href="/extras/02-full-stack/04-docker/index.html">4. Docker</a></li>
            <li class="" data-nav-id="/extras/02-full-stack/05-working/index.html"><a class="padding" href="/extras/02-full-stack/05-working/index.html">5. Working with Docker</a></li>
            <li class="" data-nav-id="/extras/02-full-stack/06-nodemon/index.html"><a class="padding" href="/extras/02-full-stack/06-nodemon/index.html">6. Nodemon</a></li>
            <li class="" data-nav-id="/extras/02-full-stack/07-database/index.html"><a class="padding" href="/extras/02-full-stack/07-database/index.html">7. Database</a></li>
            <li class="" data-nav-id="/extras/02-full-stack/08-knex/index.html"><a class="padding" href="/extras/02-full-stack/08-knex/index.html">8. Knex</a></li></ul></li>
            <li class="" data-nav-id="/extras/03-canvas-setup/index.html"><input type="checkbox" id="R-section-34a809bea981e201e90739794ef2ad65" aria-controls="R-subsections-34a809bea981e201e90739794ef2ad65"><label for="R-section-34a809bea981e201e90739794ef2ad65"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Setting Up a Canvas Course</span></label><a class="padding" href="/extras/03-canvas-setup/index.html"><b>3. </b>Setting Up a Canvas Course</a><ul id="R-subsections-34a809bea981e201e90739794ef2ad65" class="collapsible-menu">
            <li class="" data-nav-id="/extras/03-canvas-setup/01-codio-org/index.html"><a class="padding" href="/extras/03-canvas-setup/01-codio-org/index.html">1. Canvas to Codio Org</a></li>
            <li class="" data-nav-id="/extras/03-canvas-setup/02-codio-course/index.html"><a class="padding" href="/extras/03-canvas-setup/02-codio-course/index.html">2. Canvas to Codio Course</a></li>
            <li class="" data-nav-id="/extras/03-canvas-setup/03-codio-assign/index.html"><a class="padding" href="/extras/03-canvas-setup/03-codio-assign/index.html">3. Canvas to Codio Assignment</a></li>
            <li class="" data-nav-id="/extras/03-canvas-setup/04-canvas-clone/index.html"><a class="padding" href="/extras/03-canvas-setup/04-canvas-clone/index.html">4. Cloning a Canvas Course</a></li></ul></li>
            <li class="" data-nav-id="/extras/04-deploy-example/index.html"><input type="checkbox" id="R-section-e55f22700d7c855e47a026797d217f3e" aria-controls="R-subsections-e55f22700d7c855e47a026797d217f3e"><label for="R-section-e55f22700d7c855e47a026797d217f3e"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Deployment Example</span></label><a class="padding" href="/extras/04-deploy-example/index.html"><b>4. </b>Deployment Example</a><ul id="R-subsections-e55f22700d7c855e47a026797d217f3e" class="collapsible-menu">
            <li class="" data-nav-id="/extras/04-deploy-example/01-instructions/index.html"><a class="padding" href="/extras/04-deploy-example/01-instructions/index.html">1. Instructions</a></li></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
            <li class="R-variantswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-paint-brush"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-variant">Theme</label>
                  <select id="R-select-variant">
                    <option id="R-select-variant-auto" value="auto" selected>KSU Auto</option>
                    <option id="R-select-variant-light-theme" value="light-theme">KSU Light</option>
                    <option id="R-select-variant-dark-theme" value="dark-theme">KSU Dark</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
              <script>window.relearn.markVariant();</script>
            </li>
          </ul>
        </div>
<div id="R-footer"><p>Built using <a href="http://gohugo.io/">Hugo</a> and <a href="https://github.com/ksu-cs-textbooks/hugo-theme-relearn">Hugo Relearn Theme</a>.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; margin: .5rem auto" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.</a></p></div>
      </div>
    </aside>
    <script src="/extras/js/clipboard/clipboard.min.js?1758047504" defer></script>
    <script src="/extras/js/perfect-scrollbar/perfect-scrollbar.min.js?1758047504" defer></script>
    <script src="/extras/js/theme.min.js?1758047504" defer></script>
  </body>
</html>
